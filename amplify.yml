version: 1
frontend:
  phases:
    preBuild:
      commands:
        - curl -sSL https://github.com/gohugoio/hugo/releases/download/v0.125.7/hugo_0.125.7_Linux-64bit.tar.gz | tar xz -C /tmp
        - mv /tmp/hugo /tmp/hugo-v0.125.7  # Move to /tmp and rename it
        - export PATH=$PATH:/tmp  # Add Hugo to the PATH
        - hugo version  # Verify Hugo version
    build:
      commands:
        - hugo --gc --minify  # Build the Hugo site with garbage collection and minification
  artifacts:
    baseDirectory: public  # The directory where Hugo builds the site
    files:
      - '**/*'  # All files in the public directory
  cache:
    paths:
      - 'themes/**/*'  # Cache the theme directory to speed up builds