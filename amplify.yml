version: 1
frontend:
  phases:
    # The preBuild phase installs the correct version of Hugo
    preBuild:
      commands:
        - curl -sSL https://github.com/gohugoio/hugo/releases/download/v0.148.1/hugo_extended_0.148.1_Linux-64bit.tar.gz | tar xz -C /tmp
        - mv /tmp/hugo /usr/local/bin/
        - hugo version
    # The build phase uses the installed hugo command
    build:
      commands:
        - hugo --gc --minify
  artifacts:
    # This points to the default folder where Hugo builds the site
    baseDirectory: public
    files:
      - '**/*'
  cache:
    # This caches Hugo-specific files to speed up future builds
    paths:
      - /root/.cache/hugo_cache/